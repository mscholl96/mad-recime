@startuml
start
:Create empty list for parsed recipes;
:Get data from json;
repeat
    :Get recipe from data;
    :Get list of ingredient texts from recipe;
    :Get list of instruction texts from recipe;
    if (Number ingredient texts <= 20 ) then (yes)
        if (Number instruction texts <= 30 ) then (yes)
            :Create empty recipe object;
            repeat
                :Create empty ingredient object (amount: 1, unit: none, kind: "" );
                :Get recipe ingredient text;
                :Convert to lower case;
                :Parse quantities and their unit (quantulum);
                switch (Parsing result)
                    case ( No quantity or no result )
                        :do nothing;
                    case ( 1 unit and quantity )
                        :add unit and quantity to ingredient object;
                    case ( Several units and quantities) 
                        :add first tuple to ingredient object;
                    case ( No unit)
                        :use quantity only;
                endswitch
                :Remove text in parentheses;
                :Tokenize text and extract nouns;
                if (List of nouns) then (empty)
                else (not empty)
                    :use nouns as ingredient kind string;
                    :Add ingredient object to recipe;
                endif
            repeat while (all elements processed) is (no) not (yes)
            if (recipe object contains ingredients) then (yes)
                :Add recipe to list;
            else (no)
            endif
            else (no)
        endif
    else (no)
    endif
repeat while (all recipes processed) is (no) not (yes)
stop
@enduml