@startuml
start
:Create empty list for parsed recipes;
:Get recipe data from json;
:Get ingredient list from json;
repeat
    :Get element from ingredient list;
    :Check validity of element;
    if (Element is valid) then (yes)
            :Create recipe object;
            :Parse ingredients to recipe object;
            repeat
                if (Raw recipe id == recipe object id) then (yes)
                    repeat
                        :Get ingredient from recipe object;
                        repeat
                            :Get raw ingredient text from raw ingredients;
                            :convert raw text to lower case;
                            if (Raw text contains ingredient) then (yes)
                                :Parse quantities and their unit (quantulum) from remaining text;
                                switch (Parsing result)
                                    case ( No quantity or no result )
                                        :do nothing;
                                    case ( 1 unit and quantity )
                                        :add unit and quantity to ingredient object;
                                    case ( Several units and quantities) 
                                        :add first tuple to ingredient object;
                                    case ( No unit)
                                        :use quantity only;
                                endswitch
                            endif
                        repeat while (all raw ingredients processed) is (no) not (yes)
                    repeat while (all parsed ingredients processed) is (no) not (yes)
                endif
            repeat while (all raw recipes processed) is (no) not (yes)
    else (no)
    endif
repeat while (all elements in ingredient list processed) is (no) not (yes)
stop
@enduml